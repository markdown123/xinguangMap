<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @font-face {
            /*1. 这个字体名称要注意 icomoon*/
            font-family: 'icomoon';
            /*2. 一定要注意路径的问题*/
            src: url('./fonts/icomoon.eot?7kkyc2');
            src: url('./fonts/icomoon.eot?7kkyc2#iefix') format('embedded-opentype'),
                url('./fonts/icomoon.ttf?7kkyc2') format('truetype'),
                url('./fonts/icomoon.woff?7kkyc2') format('woff'),
                url('./fonts/icomoon.svg?7kkyc2#icomoon') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        .change {
            transition: all .5s;
            transform: rotate(-180deg);

        }

        .change1 {
            transition: all .5s;
            /* transform: rotate(0deg)  */
        }
    </style>
    <link rel="stylesheet" href="./map.css">
</head>

<body>
    <div>
        <img src="./img/bmap.png" alt="">
        <!-- 右上角按钮 -->
        <div class="right">
            <div class="content">
                平台用户需求调研
            </div>
        </div>

        <!-- 疫情数据面板 -->
        <!-- 累计确诊 -->
        <div class="dataTable">
            <div class="acc">
                <span></span>
            </div>
            <div class="add">
                <i>+</i>
                <span></span>
            </div>

            <!-- 现有确诊 -->
            <div class="acc current">
                <span></span>
            </div>
            <div class="add currentAdd">
                <i>+</i>
                <span></span>
            </div>

            <!-- 累计死亡 -->

            <div class="acc death">
                <span></span>
            </div>
            <div class="add deathAdd">
                <i>+</i>
                <span></span>
            </div>
            <!-- 累计治愈 -->
            <div class="acc cure">
                <span></span>
            </div>
            <div class="add cureAdd">
                <i>+</i>
                <span></span>
            </div>
        </div>


        <!-- 选择框 -->
        <div class="selectCity">
            <div class="input-content">
                <!-- 用input框模拟选择框 -->
                <input type="text" value="请选择">
                <div class="box">
                    <div class="group">
                        <span>默认</span>
                        <li>世界</li>
                    </div>
                </div>
                <i></i>
            </div>
            <button></button>
        </div>

        <!-- 地图区 -->
        <div id="map"></div>

        <!-- 图表区 -->
        <div id="charts-left"></div>
        <div id="charts-right"></div>

        <!-- 最新资讯 -->
        <div class="source">
            <!-- 选择框 -->
            <div class="selectCity news">
                <div class="input-content">
                    <!-- 用input框模拟选择框 -->
                    <input type="text">

                </div>
                <button></button>
            </div>

            <!-- 热门搜索 -->
            <div class="tags">
                <span>热门搜索</span>
                <li>诈骗</li>
                <li>诈骗</li>
                <li>诈骗</li>
                <li>诈骗</li>
                <li>诈骗</li>
            </div>

            <div class="tabs">
                <div class="btn">
                    <li class="tabscurrent">官方要闻</li>
                    <li>海外消息</li>
                    <li>使馆信息</li>
                </div>
                <div class="item">
                    <div class="tcontent">
                        <p>疫情反弹 驻英使馆提醒中国公民加强防范措施</p>
                        <p>中国新闻网</p>
                        <p>中新网9月27日电
                            据中国驻英国大使馆微信公众号消息，近期英国新冠疫情强烈反弹，9月23、24、25日单日确诊病例均超过6000例。英国政府医学顾问警告，如不及时采取有效措施，10月中旬可能每天新增确诊5万例，死亡数百人。英国政府近期连续收紧防控举措，英格兰地区要求9月14日起禁止6人以上聚会，9月24日起酒吧、餐厅等只能营业至晚上10点，佩戴面罩范围扩大至零售业、出租车及酒店工作人员，违者将处以罚款等。
                        </p>
                    </div>
                    <div class="tcontent">
                        <p>疫情反弹 驻英使馆提醒中国公民加强防范措施</p>
                        <p>中国新闻网</p>
                        <p>中新网9月27日电
                            据中国驻英国大使馆微信公众号消息，近期英国新冠疫情强烈反弹，9月23、24、25日单日确诊病例均超过6000例。英国政府医学顾问警告，如不及时采取有效措施，10月中旬可能每天新增确诊5万例，死亡数百人。英国政府近期连续收紧防控举措，英格兰地区要求9月14日起禁止6人以上聚会，9月24日起酒吧、餐厅等只能营业至晚上10点，佩戴面罩范围扩大至零售业、出租车及酒店工作人员，违者将处以罚款等。
                        </p>
                    </div>
                    <div class="tcontent">
                        <p>疫情反弹 驻英使馆提醒中国公民加强防范措施</p>
                        <p>中国新闻网</p>
                        <p>中新网9月27日电
                            据中国驻英国大使馆微信公众号消息，近期英国新冠疫情强烈反弹，9月23、24、25日单日确诊病例均超过6000例。英国政府医学顾问警告，如不及时采取有效措施，10月中旬可能每天新增确诊5万例，死亡数百人。英国政府近期连续收紧防控举措，英格兰地区要求9月14日起禁止6人以上聚会，9月24日起酒吧、餐厅等只能营业至晚上10点，佩戴面罩范围扩大至零售业、出租车及酒店工作人员，违者将处以罚款等。
                        </p>
                    </div>
                    <div class="tcontent">
                        <p>疫情反弹 驻英使馆提醒中国公民加强防范措施</p>
                        <p>中国新闻网</p>
                        <p>中新网9月27日电
                            据中国驻英国大使馆微信公众号消息，近期英国新冠疫情强烈反弹，9月23、24、25日单日确诊病例均超过6000例。英国政府医学顾问警告，如不及时采取有效措施，10月中旬可能每天新增确诊5万例，死亡数百人。英国政府近期连续收紧防控举措，英格兰地区要求9月14日起禁止6人以上聚会，9月24日起酒吧、餐厅等只能营业至晚上10点，佩戴面罩范围扩大至零售业、出租车及酒店工作人员，违者将处以罚款等。
                        </p>
                    </div>
                    <div class="tcontent">
                        <p>疫情反弹 驻英使馆提醒中国公民加强防范措施</p>
                        <p>中国新闻网</p>
                        <p>中新网9月27日电
                            据中国驻英国大使馆微信公众号消息，近期英国新冠疫情强烈反弹，9月23、24、25日单日确诊病例均超过6000例。英国政府医学顾问警告，如不及时采取有效措施，10月中旬可能每天新增确诊5万例，死亡数百人。英国政府近期连续收紧防控举措，英格兰地区要求9月14日起禁止6人以上聚会，9月24日起酒吧、餐厅等只能营业至晚上10点，佩戴面罩范围扩大至零售业、出租车及酒店工作人员，违者将处以罚款等。
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="./data/E-Cdata.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="./data/countryData.js"></script>
    <script src="./data/globalData.js"></script>
    <script src="./data/usaData.js"></script>
    <!-- <script src="./e-charts.js"></script> -->
    <!-- 面两行的意思是，浏览器从网络上获取echart包，而不需要你配置任何编程环境  -->
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts.min.js"></script>
    <script type="text/javascript" src="https://assets.pyecharts.org/assets/maps/world.js"></script>
    <script src="./data/e-charts_option.js"></script>
    <script>
        // 处理点击事件
        window.onload = function () {
            document.addEventListener('click', function () {
                //    点击其他的元素，箭头回到初始状态，box盒子隐藏
                flag = false
                i.className = 'change1'
                box.style.display = 'none'
            })
            // 点击input和box，阻止冒泡
            input_content.addEventListener('click', function (event) {
                event = event || window.event
                // 避免document接收到该点击事件，使得box隐藏
                event.stopPropagation()
                // flag控制选择框箭头的旋转
                if (!flag) {
                    i.className = 'change'
                    flag = true
                    // 点击input框，显示下拉框
                    box.style.display = 'block'
                } else {
                    i.className = 'change1'
                    flag = false
                    box.style.display = 'none'
                }

            })
        }

        // 渲染地图
        var timer = setTimeout(() => {
            console.log(countryCount);
            // 地图绘制
            var myMap = echarts.init(document.getElementById('map'), 'white', { renderer: 'canvas' })
            myMap.setOption(option_map)
            // 左边图表
            var mychart = echarts.init(document.getElementById('charts-left'))
            mychart.setOption(option_left)

            // 右边图表
            var cureRate = []
            var deadRate = []
            for (let i = 0; i < confirmData.length; i++) {
                cureRate[i] = (cureData[i] / confirmData[i]).toFixed(3)
                deadRate[i] = (deadData[i] / confirmData[i]).toFixed(3)
            }
            option_right = {
                title: {
                    text: '美国疫情发展趋势',
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#E9EEF3',
                        },
                    },
                },
                // 图例
                // legend: {
                //     textStyle: {
                //         fontSize: 12,
                //     },

                // },
                toolbox: {
                    show: true,
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: dateArr,
                    axisLabel: {
                        textStyle: {
                            fontSize: 12,
                        }
                    },
                },
                yAxis: {
                    type: 'value',
                    show: true,
                    axisLabel: {
                        formatter: '{value} ',
                        textStyle: {
                            fontSize: 9,
                        }
                    },
                    min: 0,
                    max: 0.7,
                    interval: 0.1,
                },
                series: [
                    {
                        name: '治愈率',
                        type: 'line',
                        // 由于请求数据，为异步，所以此时无法获取请求数据
                        data: cureRate,
                        itemStyle: {
                            normal: {
                                color: '#31AC76',
                                lineStyle: {
                                    color: '#31AC76',
                                }
                            }
                        }
                    },
                    {
                        name: '死亡率',
                        type: 'line',
                        data: deadRate,
                        itemStyle: {
                            normal: {
                                color: '#333333',
                                lineStyle: {
                                    color: '#333333',
                                }
                            }
                        }

                    },
                ]
            };
            var mychart1 = echarts.init(document.getElementById('charts-right'))
            mychart1.setOption(option_right)
        }, 1000);

    </script>
</body>

</html>